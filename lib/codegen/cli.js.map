{"version":3,"file":"cli.js","sourceRoot":"","sources":["../../src/codegen/cli.ts"],"names":[],"mappings":";;AAAA,iCAA0B;AAC1B,+BAAiC;AAEjC,MAAM,gBAAgB,GAA2B;IAC7C,MAAM,EAAE,uBAAuB;IAC/B,GAAG,EAAE,kBAAkB;IACvB,IAAI,EAAE,mBAAmB;IACzB,EAAE,EAAE,yBAAyB;IAC7B,EAAE,EAAE,yBAAyB;IAC7B,IAAI,EAAE,mBAAmB;IACzB,GAAG,EAAE,kBAAkB;CAC1B,CAAA;AAED,SAAS,WAAW;IAChB,OAAO,CAAC,GAAG,CAAC;;;;;;;EAOd,MAAM;QACJ,IAAI,CAAC,gBAAgB,CAAC;QACtB,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,CACtB,SAAS,QAAQ,KAAK,gBAAgB,CAAC,QAAQ,CAAC,EAAE,CAC7C,CAAC;QACF,IAAI,CAAC,IAAI,CAAC;;;;6DAI+C,CAAC,CAAC;IAC3D,OAAO,CAAC,IAAI,EAAE,CAAC;AACnB,CAAC;AAED,MAAM,IAAI,GAAG,IAAA,cAAI,EAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AACzC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;IACZ,WAAW,EAAE,CAAC;AAClB,CAAC;AAED,IAAI,QAAgB,CAAC;AACrB,KAAK,IAAI,MAAM,IAAI,gBAAgB,EAAE,CAAC;IAClC,IAAI,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;QACf,QAAQ,GAAG,MAAM,CAAC;IACtB,CAAC;AACL,CAAC;AAED,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;IACf,OAAO,CAAC,KAAK,CAAC,8CAA8C,CAAC,CAAC;IAC9D,WAAW,EAAE,CAAC;AAClB,CAAC;AAED,IAAI,CAAC;IACD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC;IACpB,IAAA,cAAQ,EAAC,QAAQ,EAAE;QACf,KAAK,EAAE,IAAI,CAAC,CAAC;QACb,SAAS,EAAE,IAAI,CAAC,SAAS;QACzB,MAAM,EAAE,IAAI,CAAC,MAAM;QACnB,SAAS,EAAE,IAAI,CAAC,SAAS;KAC5B,CAAC,CAAC;AAEP,CAAC;AAAC,OAAO,CAAC,EAAE,CAAC;IACT,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;IACzB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IACvB,WAAW,EAAE,CAAC;AAClB,CAAC","sourcesContent":["import argv from \"./argv\";\r\nimport { generate } from \"./api\";\r\n\r\nconst supportedTargets: Record<string, string> = {\r\n    csharp: 'generate for C#/Unity',\r\n    cpp: 'generate for C++',\r\n    haxe: 'generate for Haxe',\r\n    ts: 'generate for TypeScript',\r\n    js: 'generate for JavaScript',\r\n    java: 'generate for Java',\r\n    lua: 'generate for LUA',\r\n}\r\n\r\nfunction displayHelp() {\r\n    console.log(`\\nschema-codegen [path/to/Schema.ts]\r\n\r\nUsage (C#/Unity)\r\n    schema-codegen src/Schema.ts --output client-side/ --csharp --namespace MyGame.Schema\r\n\r\nValid options:\r\n    --output: the output directory for generated client-side schema files\r\n${Object.\r\n    keys(supportedTargets).\r\n    map((targetId) => (\r\n`    --${targetId}: ${supportedTargets[targetId]}`\r\n    )).\r\n    join(\"\\n\")}\r\n\r\nOptional:\r\n    --namespace: generate namespace on output code\r\n    --decorator: custom name for @type decorator to scan for`);\r\n    process.exit();\r\n}\r\n\r\nconst args = argv(process.argv.slice(2));\r\nif (args.help) {\r\n    displayHelp();\r\n}\r\n\r\nlet targetId: string;\r\nfor (let target in supportedTargets) {\r\n    if (args[target]) {\r\n        targetId = target;\r\n    }\r\n}\r\n\r\nif (!args.output) {\r\n    console.error(\"You must provide a valid --output directory.\");\r\n    displayHelp();\r\n}\r\n\r\ntry {\r\n    args.files = args._;\r\n    generate(targetId, {\r\n        files: args._,\r\n        decorator: args.decorator,\r\n        output: args.output,\r\n        namespace: args.namespace\r\n    });\r\n\r\n} catch (e) {\r\n    console.error(e.message);\r\n    console.error(e.stack);\r\n    displayHelp();\r\n}\r\n"]}