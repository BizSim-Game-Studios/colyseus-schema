{"version":3,"file":"java.js","sourceRoot":"","sources":["../../../src/codegen/languages/java.ts"],"names":[],"mappings":";;AAuCA,4BAKC;AA5CD,oCAA4E;AAG5E,MAAM,QAAQ,GAA8B;IACxC,QAAQ,EAAE,QAAQ;IAClB,QAAQ,EAAE,OAAO;IACjB,SAAS,EAAE,SAAS;IACpB,MAAM,EAAE,MAAM;IACd,OAAO,EAAE,OAAO;IAChB,OAAO,EAAE,OAAO;IAChB,QAAQ,EAAE,KAAK;IACf,OAAO,EAAE,KAAK;IACd,QAAQ,EAAE,MAAM;IAChB,OAAO,EAAE,MAAM;IACf,QAAQ,EAAE,MAAM;IAChB,SAAS,EAAE,OAAO;IAClB,SAAS,EAAE,QAAQ;CACtB,CAAA;AAED,MAAM,eAAe,GAA8B;IAC/C,QAAQ,EAAE,IAAI;IACd,QAAQ,EAAE,GAAG;IACb,SAAS,EAAE,OAAO;IAClB,MAAM,EAAE,GAAG;IACX,OAAO,EAAE,GAAG;IACZ,OAAO,EAAE,GAAG;IACZ,QAAQ,EAAE,GAAG;IACb,OAAO,EAAE,GAAG;IACZ,QAAQ,EAAE,GAAG;IACb,OAAO,EAAE,GAAG;IACZ,QAAQ,EAAE,GAAG;IACb,SAAS,EAAE,GAAG;IACd,SAAS,EAAE,GAAG;CACjB,CAAA;AAED;;GAEG;AAEH,SAAgB,QAAQ,CAAE,OAAgB,EAAE,OAAwB;IAChE,OAAO,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACjC,IAAI,EAAE,KAAK,CAAC,IAAI,GAAG,OAAO;QAC1B,OAAO,EAAE,aAAa,CAAC,KAAK,EAAE,OAAO,CAAC,SAAS,CAAC;KACnD,CAAC,CAAC,CAAC;AACR,CAAC;AAED,SAAS,aAAa,CAAC,KAAY,EAAE,SAAiB;IAClD,MAAM,MAAM,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;IACvC,OAAO,GAAG,IAAA,wBAAgB,GAAE;EAC9B,SAAS,CAAC,CAAC,CAAC,aAAa,SAAS,GAAG,CAAC,CAAC,CAAC,EAAE;;;;;;;EAO1C,MAAM,gBAAgB,KAAK,CAAC,IAAI,YAAY,KAAK,CAAC,OAAO;EACzD,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;EACzE,MAAM;EACN,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;CACrB,CAAC;AACF,CAAC;AAED,SAAS,gBAAgB,CAAC,IAAc,EAAE,SAAiB,EAAE;IACzD,IAAI,QAAQ,GAAG,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;IAC5C,IAAI,QAAQ,GAAG,QAAQ,CAAC;IACxB,IAAI,QAAgB,CAAC;IACrB,IAAI,QAAQ,GAAW,EAAE,CAAC;IAC1B,IAAI,WAAW,GAAG,EAAE,CAAC;IAErB,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,MAAM,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAErD,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,IAAI,aAAa,EAAE,CAAC;YACvC,QAAQ,GAAG,GAAG,IAAI,CAAC,SAAS,QAAQ,CAAC;QACzC,CAAC;QAED,IAAG,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE,CAAC;YACrB,QAAQ,GAAG,CAAC,aAAa,CAAC;gBACtB,CAAC,CAAC,IAAI,CAAC,SAAS;gBAChB,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAE/B,WAAW,GAAG,OAAO,QAAQ,GAAG,CAAC,IAAI,CAAC,IAAI,KAAK,KAAK,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,QAAQ,GAAG,CAAC;QAEtG,CAAC;aAAM,IAAG,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;YAC9B,QAAQ,GAAG,CAAC,aAAa,CAAC;gBACtB,CAAC,CAAC,eAAe,IAAI,CAAC,SAAS,GAAG;gBAClC,CAAC,CAAC,aAAa,CAAC;YAEpB,WAAW,GAAG,kBAAkB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,QAAQ,GAAG,CAAC;QAE/E,CAAC;aAAM,IAAG,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE,CAAC;YAC5B,QAAQ,GAAG,CAAC,aAAa,CAAC;gBACtB,CAAC,CAAC,aAAa,IAAI,CAAC,SAAS,GAAG;gBAChC,CAAC,CAAC,WAAW,CAAC;YAElB,WAAW,GAAG,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,QAAQ,GAAG,CAAC;QAC7E,CAAC;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE,CAAC;YACtB,QAAQ,IAAI,CAAC,aAAa,CAAC;gBACvB,CAAC,CAAC,MAAM;gBACR,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC;QAC/B,CAAC;IAEL,CAAC;SAAM,CAAC;QACJ,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/B,WAAW,GAAG,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;IAExC,OAAO,mBAAmB,QAAQ,OAAO,MAAM;IAC/C,MAAM,GAAG,QAAQ,MAAM,WAAW,GAAG,CAAA;AACzC,CAAC","sourcesContent":["import { Class, Property, File, getCommentHeader, Context } from \"../types\";\r\nimport { GenerateOptions } from \"../api\";\r\n\r\nconst typeMaps: { [key: string]: string } = {\r\n    \"string\": \"String\",\r\n    \"number\": \"float\",\r\n    \"boolean\": \"boolean\",\r\n    \"int8\": \"byte\",\r\n    \"uint8\": \"short\",\r\n    \"int16\": \"short\",\r\n    \"uint16\": \"int\",\r\n    \"int32\": \"int\",\r\n    \"uint32\": \"long\",\r\n    \"int64\": \"long\",\r\n    \"uint64\": \"long\",\r\n    \"float32\": \"float\",\r\n    \"float64\": \"double\",\r\n}\r\n\r\nconst typeInitializer: { [key: string]: string } = {\r\n    \"string\": '\"\"',\r\n    \"number\": \"0\",\r\n    \"boolean\": \"false\",\r\n    \"int8\": \"0\",\r\n    \"uint8\": \"0\",\r\n    \"int16\": \"0\",\r\n    \"uint16\": \"0\",\r\n    \"int32\": \"0\",\r\n    \"uint32\": \"0\",\r\n    \"int64\": \"0\",\r\n    \"uint64\": \"0\",\r\n    \"float32\": \"0\",\r\n    \"float64\": \"0\",\r\n}\r\n\r\n/**\r\n * C# Code Generator\r\n */\r\n\r\nexport function generate (context: Context, options: GenerateOptions): File[] {\r\n    return context.classes.map(klass => ({\r\n        name: klass.name + \".java\",\r\n        content: generateClass(klass, options.namespace)\r\n    }));\r\n}\r\n\r\nfunction generateClass(klass: Class, namespace: string) {\r\n    const indent = (namespace) ? \"\\t\" : \"\";\r\n    return `${getCommentHeader()}\r\n${namespace ? `\\npackage ${namespace};` : \"\"}\r\n\r\nimport io.colyseus.serializer.schema.Schema;\r\nimport io.colyseus.serializer.schema.annotations.SchemaClass;\r\nimport io.colyseus.serializer.schema.annotations.SchemaField;\r\n\r\n@SchemaClass\r\n${indent}public class ${klass.name} extends ${klass.extends} {\r\n${klass.properties.map(prop => generateProperty(prop, indent)).join(\"\\n\\n\")}\r\n${indent}}\r\n${namespace ? \"}\" : \"\"}\r\n`;\r\n}\r\n\r\nfunction generateProperty(prop: Property, indent: string = \"\") {\r\n    let typeArgs = `${prop.index}/${prop.type}`;\r\n    let property = \"public\";\r\n    let langType: string;\r\n    let ctorArgs: string = \"\";\r\n    let initializer = \"\";\r\n\r\n    if (prop.childType) {\r\n        const isUpcaseFirst = prop.childType.match(/^[A-Z]/);\r\n\r\n        if (prop.type !== \"ref\" && isUpcaseFirst) {\r\n            ctorArgs = `${prop.childType}.class`;\r\n        }\r\n\r\n        if(prop.type === \"ref\") {\r\n            langType = (isUpcaseFirst)\r\n                ? prop.childType\r\n                : typeMaps[prop.childType];\r\n\r\n            initializer = `new ${langType}${(prop.type !== \"ref\" && isUpcaseFirst) ? \"<>\" : \"\"}(${ctorArgs})`;\r\n\r\n        } else if(prop.type === \"array\") {\r\n            langType = (isUpcaseFirst)\r\n                ? `ArraySchema<${prop.childType}>`\r\n                : `ArraySchema`;\r\n\r\n            initializer = `new ArraySchema${(isUpcaseFirst) ? \"<>\" : \"\"}(${ctorArgs})`;\r\n\r\n        } else if(prop.type === \"map\") {\r\n            langType = (isUpcaseFirst)\r\n                ? `MapSchema<${prop.childType}>`\r\n                : `MapSchema`;\r\n\r\n            initializer = `new MapSchema${(isUpcaseFirst) ? \"<>\" : \"\"}(${ctorArgs})`;\r\n        }\r\n\r\n        if (prop.type !== \"ref\") {\r\n            typeArgs += (isUpcaseFirst)\r\n                ? `/ref`\r\n                : `/${prop.childType}`;\r\n        }\r\n\r\n    } else {\r\n        langType = typeMaps[prop.type];\r\n        initializer = typeInitializer[prop.type];\r\n    }\r\n\r\n    property += ` ${langType} ${prop.name}`;\r\n\r\n    return `\\t@SchemaField(\"${typeArgs}\")\\t${indent}\r\n\\t${indent}${property} = ${initializer};`\r\n}\r\n"]}